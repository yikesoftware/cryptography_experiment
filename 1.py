# Fermat 素性检验
from random import randint
from math import gcd
import sys


def my_gcd(x: int, y: int):
    return x if y == 0 else my_gcd(y, x % y)


def main(case=0):
    m = case if case else int(input("Input m (m>=3): "))
    print(f"Get m = {m}")
    k = 10   # 安全参数
    print(f"Set k = {k}")
    print()

    for t in range(k):
        a = randint(2, m-2)  # 2 <= a <= (m-2)
        print(f"Choose a = {a}")
        print()
        g = gcd(a, m)
        if g != 1:
            print("m 为合数")
            return
        r = pow(a, (m-1), m)  # 快速幂取模
        if r == 1:
            continue
        else:
            print("m 为合数")
            return

    print()
    print(f"m 的长度为:", len(str(m)))
    print(f"m 有 1-(1/2)^{k} 的概率为素数")
    print()

test_case = [
        53416431717163773076683666662712697441367350578113873890781467047002329753176088784979589869676491766597504300057738124569377243430054093190476397026880725608807912421829847465909996520928816871059569739698908031976620093046917391297173333045161172502930898758632410334934517574848247597190515563333963373153492860998117276675039523152539251275135633,
        58099777006718310759068241251236738251093287954940798239512242986814298241552263888710475966482965389329886274826402329903355467020283434734970541809830015383868117165098002204340160309075726792886036234365997207313958695068692186119440714096209409096578737567524246883373548071418348104106960891355169626836563870896099307349023096061080223280327809,
        87411797573569981596754390481032620117389237149485685310107880185386117984158759691217261235338890741075018962193578454254177073320179829963958712530907559471977502978030828339504150131040109078805090236290105981530612509088980573445477850566046459656920726115355924558628172894820758728145523682174654016322038541089320126298057221635855470940507689,
        39837849201786577063932078359669522772090518853418926770707029272617109210834883010013783324607398288981218624294616878735455955748254044298726140140118341167511227532777364990353925214388835602162368119789489054753276784868455354380132666976220610005663049429218572744780481821144104718146244855244109319640413911582187669309536940365739345042004547602741992763452687199523584869027328327383452342566127541173607483421305181922280887589999179706356044319716321393994493680730369908369074421138571793
    ]

if __name__ == "__main__":
    print("Fermat 素性检验")
    main(test_case[0])
